# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –î–æ–¥–µ–ª–∞—Ç—å –ª–æ–≥–∏–∫—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è Rocket Constructor

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–í –ø—Ä–æ–µ–∫—Ç–µ NovaLab –µ—Å—Ç—å **—Ä–∞–±–æ—Ç–∞—é—â–∏–π Car3DConstructor**, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ **—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è —Ä–∞–∫–µ—Ç**.

### –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∫–µ—Ç—ã (–ù–ï –¢–†–û–ì–ê–¢–¨):

| –§–∞–π–ª | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|------|-----------|
| `RocketScene3D.jsx` | 3D Canvas —Å —Å–µ—Ç–∫–æ–π, –æ—Å–≤–µ—â–µ–Ω–∏–µ–º, –∫–∞–º–µ—Ä–æ–π (–∫–∞–∫ Scene3D —É –º–∞—à–∏–Ω—ã) |
| `RocketPart3DModel.jsx` | –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–µ 3D –º–æ–¥–µ–ª–∏ –≤—Å–µ—Ö 10 –¥–µ—Ç–∞–ª–µ–π —Ä–∞–∫–µ—Ç—ã |
| `RocketConstructor.css` | –°—Ç–∏–ª–∏ –ø–∞–Ω–µ–ª–∏ –∏ –∫–Ω–æ–ø–æ–∫ |

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å:

| –§–∞–π–ª | –ü—Ä–æ–±–ª–µ–º–∞ |
|------|----------|
| `RocketConstructor.jsx` | –õ–æ–≥–∏–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| `rocketConnectionRules.js` | Snap-–ª–æ–≥–∏–∫–∞ —Å–ª–æ–º–∞–Ω–∞ |
| `DraggableRocketPart.jsx` | –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DraggablePart3D` –∏–∑ –º–∞—à–∏–Ω—ã |

---

## –ó–∞–¥–∞—á–∞

**–°–¥–µ–ª–∞—Ç—å Rocket Constructor –ø–æ–ª–Ω–æ–π –∫–æ–ø–∏–µ–π Car3DConstructor, –Ω–æ —Å —Ä–∞–∫–µ—Ç–Ω—ã–º–∏ –¥–µ—Ç–∞–ª—è–º–∏.**

### –†–∞–±–æ—á–∏–µ —Ñ–∞–π–ª—ã –º–∞—à–∏–Ω—ã (–û–ë–†–ê–ó–ï–¶):

```
src/components/Car3DConstructor/
‚îú‚îÄ‚îÄ Car3DConstructor.jsx    ‚Üê –ì–õ–ê–í–ù–ê–Ø –õ–û–ì–ò–ö–ê
‚îú‚îÄ‚îÄ DraggablePart3D.jsx     ‚Üê Drag & Drop (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
‚îú‚îÄ‚îÄ connectionRules3D.js    ‚Üê canConnect, SNAP_RADIUS
‚îú‚îÄ‚îÄ partSocketsData.js      ‚Üê –°–ª–æ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π –¥–µ—Ç–∞–ª–∏
‚îî‚îÄ‚îÄ Part3DModel.jsx         ‚Üê 3D –º–æ–¥–µ–ª–∏ –º–∞—à–∏–Ω—ã
```

---

## –î–µ—Ç–∞–ª–∏ —Ä–∞–∫–µ—Ç—ã –∏ –∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –ò–µ—Ä–∞—Ä—Ö–∏—è —Å–±–æ—Ä–∫–∏ (—Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö):

```
                    ‚îå‚îÄ –û–±—Ç–µ–∫–∞—Ç–µ–ª—å (fairing)
                    ‚îÇ
         ‚îå‚îÄ –õ—É–Ω–Ω—ã–π –º–æ–¥—É–ª—å (lunar_lander)
         ‚îÇ
‚îå‚îÄ –ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (command_module) ‚îÄ‚îò
‚îÇ
‚îú‚îÄ –ë–∞–∫ —Ç–æ–ø–ª–∏–≤–Ω—ã–π (fuel_tank) ‚îÄ –º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ
‚îÇ
‚îú‚îÄ –ö–æ—Ä–ø—É—Å (body_section) ‚îÄ‚îÄ‚îÄ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã (fins) —Å–±–æ–∫—É
‚îÇ
‚îú‚îÄ –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Å—Ç—É–ø–µ–Ω–µ–π (stage_separator)
‚îÇ
‚îú‚îÄ –í–∞–∫—É—É–º–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å (upper_stage_engine)
‚îÇ
‚îú‚îÄ –ö—Ä–µ–ø–ª–µ–Ω–∏–µ –¥–≤–∏–≥–∞—Ç–µ–ª—è (engine_mount) ‚Üê –ë–ê–ó–ê
‚îÇ
‚îî‚îÄ –ì–ª–∞–≤–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å (main_engine) ‚Üê –∫—Ä–µ–ø–∏—Ç—Å—è –°–ù–ò–ó–£ –∫ –∫—Ä–µ–ø–ª–µ–Ω–∏—é
```

### Socket Data (–ø–æ –æ–±—Ä–∞–∑—Ü—É partSocketsData.js):

```javascript
ROCKET_SOCKETS_DATA = {
    engine_mount: {
        connectionOffset: { y: 0 },
        sockets: [
            { type: 'main_engine', position: [0, -0.15, 0] },  // —Å–Ω–∏–∑—É
            { type: 'fuel_tank', position: [0, 0.15, 0] },     // —Å–≤–µ—Ä—Ö—É
            { type: 'body_section', position: [0, 0.15, 0] }   // —Å–≤–µ—Ä—Ö—É
        ]
    },
    main_engine: {
        connectionOffset: { y: 2.2 },  // –≤–µ—Ä—Ö –¥–≤–∏–≥–∞—Ç–µ–ª—è –∫ –Ω–∏–∑—É –∫—Ä–µ–ø–ª–µ–Ω–∏—è
        sockets: [
            { type: 'engine_mount', position: [0, 2.2, 0] }
        ]
    },
    fuel_tank: {
        connectionOffset: { y: -2.5 },  // –Ω–∏–∑ –±–∞–∫–∞ –∫ –≤–µ—Ä—Ö—É –∫—Ä–µ–ø–ª–µ–Ω–∏—è
        sockets: [
            { type: 'engine_mount', position: [0, -2.5, 0] },
            { type: 'fuel_tank', position: [0, -2.5, 0] },
            { type: 'body_section', position: [0, -2.5, 0] },
            { type: 'command_module', position: [0, 2.5, 0] },
            { type: 'body_section', position: [0, 2.5, 0] }
        ]
    },
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏
}
```

---

## –ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ–π—Å—Ç–≤–∏–π

### 1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∏–∑ Car3DConstructor.jsx

–§—É–Ω–∫—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã:
- `checkAndSnapToSocket(draggedPart, position)` ‚Äî –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–µ–≥–æ —Å–ª–æ—Ç–∞
- `findConnectedGroup(partId)` ‚Äî –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–µ—Ç–∞–ª–∏
- `handlePartDrag(partId, pos)` ‚Äî –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ (–≥—Ä—É–ø–ø–∞ –¥–≤–∏–≥–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ)
- `handlePartDrop(partId, pos)` ‚Äî snap –¢–û–õ–¨–ö–û –∑–¥–µ—Å—å, –Ω–µ –ø—Ä–∏ drag

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DraggablePart3D –∏–∑ –º–∞—à–∏–Ω—ã

```jsx
import DraggablePart3D from '../Car3DConstructor/DraggablePart3D';
import RocketPartModels from './RocketPart3DModel';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:
<DraggablePart3D
    partType={part.type}
    initialPosition={part.position}
    customModel={RocketPartModels[part.type]}  // ‚Üê –î–æ–±–∞–≤–∏—Ç—å prop
    onPositionChange={...}
    onDrop={...}
/>
```

### 3. –î–æ–±–∞–≤–∏—Ç—å prop customModel –≤ DraggablePart3D.jsx

```jsx
// –í getModelComponent():
if (customModel) {
    const CustomModel = customModel;
    return <CustomModel />;
}
// –ò–Ω–∞—á–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ –º–∞—à–∏–Ω—ã
```

---

## –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã (–ø–æ—á–µ–º—É —Å–µ–π—á–∞—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

1. **Snap –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –¢–û–õ–¨–ö–û –ø—Ä–∏ Drop** ‚Äî –Ω–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏
2. **–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç —Å–ª–æ—Ç–∞ –∫ —Å–ª–æ—Ç—É** ‚Äî –Ω–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –¥–µ—Ç–∞–ª–∏
3. **connectionOffset** ‚Äî —Å–º–µ—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å –ø–æ—Å–ª–µ snap —á—Ç–æ–±—ã —Å–ª–æ—Ç—ã —Å–æ–≤–ø–∞–ª–∏
4. **connectedTo array** ‚Äî –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–≤—è–∑—å –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –î–æ–±–∞–≤–∏—Ç—å `engine_mount` 
2. –î–æ–±–∞–≤–∏—Ç—å `main_engine`
3. –ü–æ–¥–Ω–µ—Å—Ç–∏ –¥–≤–∏–≥–∞—Ç–µ–ª—å **—Å–Ω–∏–∑—É** –∫ –∫—Ä–µ–ø–ª–µ–Ω–∏—é
4. –ü—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏ –º—ã—à–∏ –¥–æ–ª–∂–µ–Ω —Å–ª—É—á–∏—Ç—å—Å—è snap
5. –¢–∞—â–∏—Ç—å –∑–∞ –ª—é–±—É—é –¥–µ—Ç–∞–ª—å ‚Äî –æ–±–µ –¥–≤–∏–≥–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ

---

## –§–∞–π–ª—ã –¥–ª—è reference

- **Car3DConstructor.jsx** ‚Äî –ø–æ–ª–Ω–∞—è —Ä–∞–±–æ—á–∞—è –ª–æ–≥–∏–∫–∞
- **partSocketsData.js** ‚Äî —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
- **connectionRules3D.js** ‚Äî canConnect, calculateDistance3D

–ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω, –∑–∞–º–µ–Ω–∏—Ç—å Car –Ω–∞ Rocket, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∫–µ—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏.
